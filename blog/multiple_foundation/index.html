<!doctype html><html lang=ja-jp><head><meta charset=utf-8><title>もふもふ自由帳</title>
<meta property="og:url" content="https://blog.yukatayu.tech/blog/multiple_foundation/"><meta property="og:site_name" content="もふもふ自由帳"><meta property="og:title" content="空白の縁に立つ"><meta property="og:description" content="計算機の上に在ってほしい地盤について考えます。"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-11-27T17:44:54+09:00"><meta property="article:modified_time" content="2024-11-27T17:44:54+09:00"><meta property="article:tag" content="言語"><meta property="article:tag" content="表現"><meta property="article:tag" content="願い"><meta property="og:image" content="https://blog.yukatayu.tech/images/2024/VRChat_2022-08-29_11-55-22.924_3840x2160_resize.png"><meta name=twitter:card content="summary"><meta name=twitter:title content="空白の縁に立つ"><meta name=twitter:description content="計算機の上に在ってほしい地盤について考えます。"><meta name=twitter:image content="https://blog.yukatayu.tech/images/2024/VRChat_2022-08-29_11-55-22.924_3840x2160_resize.png"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="計算機の上に在ってほしい地盤について考えます。"><meta name=author content="yukatayu"><meta name=generator content="Hugo 0.133.0"><link rel=stylesheet href=https://blog.yukatayu.tech/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://blog.yukatayu.tech/plugins/slick/slick.css><link rel=stylesheet href=https://blog.yukatayu.tech/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://blog.yukatayu.tech/plugins/venobox/venobox.css><link rel=stylesheet href=https://blog.yukatayu.tech/scss/style.min.css media=screen><link rel="shortcut icon" href=https://blog.yukatayu.tech/images/favicon.png type=image/x-icon><link rel=icon href=https://blog.yukatayu.tech/images/favicon.png type=image/x-icon><link rel=alternate type=application/rss+xml title="RSS Feed" href=https://blog.yukatayu.tech/index.xml><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("send","pageview")</script></head><body><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://blog.yukatayu.tech/><img class=img-fluid src=https://blog.yukatayu.tech/images/logo.png alt=もふもふ自由帳></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class=ti-menu></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=https://twitter.com/yukata_yu><i class=ti-twitter-alt></i></a></li><li class=nav-item><a class=nav-link href=https://www.youtube.com/@yukatayu><i class=ti-youtube></i></a></li><li class=nav-item><a class=nav-link href=https://www.nicovideo.jp/user/57110574/video><i class=ti-desktop></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/yukatayu/><i class=ti-github></i></a></li><li class=nav-item><a class=nav-link href=https://blog.yukatayu.tech/index.xml><i class=ti-rss-alt></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://blog.yukatayu.tech/><img class=img-fluid src=https://blog.yukatayu.tech/images/logo.png alt=もふもふ自由帳></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://blog.yukatayu.tech/works/>Works</a></li><li class=nav-item><a class=nav-link href=https://blog.yukatayu.tech/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=https://blog.yukatayu.tech/about/>About</a></li></ul></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mx-auto"><a href=/categories/%e6%97%a5%e8%a8%98 class=text-primary>日記</a><h2>空白の縁に立つ</h2><div class="mb-3 post-meta"><span>By yukatayu</span>
<span class="border-bottom border-primary px-2 mx-1"></span>
<span>27 November 2024</span></div><img src=https://blog.yukatayu.tech/images/2024/VRChat_2022-08-29_11-55-22.924_3840x2160_resize.png class="img-fluid w-100 mb-4" alt=空白の縁に立つ><div class="content mb-5"><h1 id=はじめに>はじめに</h1><p>あなたが見ている計算機の上には，本来幾つかの数値が存在するのみです。
そこに後から意味づけした結果を，あなたは見ています。</p><p>計算機の上に存在する意味というのは，大勢の手によって局所的に発展してきた存在です。
でも，そろそろ全く新たな地図を書いてみてもいい頃だと思うのです。</p><p>私が作りたいものは，見通しの効く世界です。</p><hr><p>私が今までにこの手の話題に触れたのは，主に以下の三点です。</p><ul><li><a href=/blog/sync_language_01>同期に特化した言語を考えてみる（１）</a><br>　——「システムの全体を見通せる状態で設計したい」という願い</li><li><a href=/blog/vr_library_01>図書館を裏返す</a><br>　—— 「情報の位置づけを明確にし，見通せるようにしたい」という願い</li><li>このツイート</li></ul><blockquote class=twitter-tweet><p lang=ja dir=ltr>ロガーがI/Oを雑に発生させすぎ問題についてなのですが、私が欲しいのは、以下のような感じのOS or コンテナシステムなのです。<br>・プログラムは発生させうるエフェクト（≒システムコール）を型として持つ。(種類は雑に増やせる)<br>・OSの機能により、どのエフェクトをどのシステムコール or…</p>&mdash; ゆかたゆ (@yukata_yu) <a href="https://twitter.com/yukata_yu/status/1728419453183066183?ref_src=twsrc%5Etfw">November 25, 2023</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script>　　　—— 「手元で流れている情報を見通し，制御したい」という願い<p>いずれも，見通しと可視化が願いの主軸です。</p><hr><h1 id=箱詰め>箱詰め</h1><p>これらに関連した存在として，コンテナ技術があります。</p><p>私が普段コンテナに対して問題を感じているのは，以下のような点です。</p><ul><li>外部から来たリクエストがコンテナ内に到達する過程が見えない（デバッグが困難）</li><li>各コンテナが発生させたり受け取ったりしうるメッセージの種類が分からず，型も付いていない</li><li>コンテナ内にカスタマイゼーションポイントを置きづらい</li><li>再コンパイル時に，同一の機能を持つコンテナが生成される可能性が低い</li></ul><p>これらは結局，既存のシステムを再利用するために詰め込んでいるからこそ発生している問題に見えます。</p><p>環境に依存するプログラムというものは，不透明な存在です。
その不透明な存在と環境を一つの箱に入れ，さらに巨大な不透明な存在にしてしまっているのが現代のコンテナ技術です。</p><p>ただの文字列よりも具体的な情報をやり取りし，そこに外界との契約が生じれば，システムの全体は見通せるようになります。
個々の不透明な存在による影響力を抑え込めば，システム全体は晴れ上がります。</p><p>ですが，このような考え方は，既に数十年前から言われていたはずの事です。
ただシステムを大きく作り直したくなかったがために，このような結果になってしまいました。
人類の開発力は有限なので仕方のない事とは言え，少し寂しい事ですね。</p><hr><h1 id=方針の整理>方針の整理</h1><p>これらを前提として，「今欲しい物は Algebraic Effects ベースの OS ですか？」と問われると，悩んでしまいます。
少し欲張ってみて，ここまでに挙げた4つ（2記事＋1ツイート＋コンテナ）に共通の芯が通っていないかと考えてみましょう。</p><p>まずは，書き出してみます。</p><ul><li>情報の流れの型付け<ul><li>プログラムやコンテナが発生させる</li><li>既存バイナリについてはアダプタを挟むか，FFIとしてアクセスする</li></ul></li><li>接続の可視化と編集<ul><li>OSやコンテナ管理層で実装する</li><li>各プログラムやコンテナが発生させるエフェクトを他プログラムや外部システムへ再マッピング可能にする</li></ul></li><li>イベントにおいて契約による互換性の表明をすることで，中間層の入れ替えを可能にする</li><li>状態と影響の可視化<ul><li>どのイベントが原因でどこの状態に影響を及ぼしたのかを可視化する</li></ul></li><li>状態同士の繋がりとイベント同士のつながりを，両方とも可視化したい<ul><li>状態の間に存在する契約についても可視化したい</li><li>物理的な接続と知識ネットワークを一つの空間上に表現したい</li></ul></li></ul><p>これらは基本的には「各プログラムの外側でも副作用を状態の一種として扱いたい」という願いです。
しかし，最後の「状態とイベントをグラフ上で並列に扱いたい」という願いは，開いたシステムに対してどの程度現実的か，今の時点では私にも想像が付いていません。</p><p>この部分が解決するまでは，過去記事で書いた「裏返された図書館」と「同期に特化した言語」と「進化したコンテナ」のうち，図書館だけは切り離された存在となります。</p><hr><h1 id=まとめ>まとめ</h1><p>私が作りたい物は，以下の二つである気がしてきました。</p><ul><li>発生するエフェクトとそれに関する契約を型として表明し，検証・可視化・繋ぎ変えを可能とする基盤</li><li>状態の繋がりと状態同士のつながり，それぞれを複数のレイヤーまたは観点で可視化できる表現方法</li></ul><p>この二つは，きっといつか「初めから一つの存在の具体例であったもの」になると信じてはいます。
けれども，私がより良い抽象化を得るまでの間は別々に考える必要がありそうですね。</p><p>それまでは，それぞれの散歩道から見える景色を楽しむことにします。</p></div></div></div></div></section><footer class=text-capitalize><div class=container><div class="row justify-content-center"><div class="col-12 text-center mb-5"><a href=https://blog.yukatayu.tech/><img src=https://blog.yukatayu.tech/images/logo.png alt=もふもふ自由帳></a></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Contact Me</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=mailto:blog@yukatayu.tech style=text-transform:none><i class="ti-email mr-3 text-primary"></i>blog@yukatayu.tech</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Social Contacts</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://twitter.com/yukata_yu>twitter</a></li><li class=mb-3><a class=text-dark href=https://www.youtube.com/@yukatayu>youtube</a></li><li class=mb-3><a class=text-dark href=https://www.nicovideo.jp/user/57110574/video>niconico</a></li><li class=mb-3><a class=text-dark href=https://github.com/yukatayu/>GitHub</a></li><li class=mb-3><a class=text-dark href=https://blog.yukatayu.tech/index.xml>RSS</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Categories</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=/categories/%e6%8a%80%e8%a1%93/>技術</a></li><li class=mb-3><a class=text-dark href=/categories/%e6%97%a5%e8%a8%98/>日記</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://blog.yukatayu.tech/works/>Works</a></li><li class=mb-3><a class=text-dark href=https://blog.yukatayu.tech/blog/>Blog</a></li><li class=mb-3><a class=text-dark href=https://blog.yukatayu.tech/about/>About</a></li></ul></div><div class="col-12 border-top py-4 text-center">© yukatayu</div></div></div></footer><script>var indexURL="https://blog.yukatayu.tech/index.json"</script><script src=https://blog.yukatayu.tech/plugins/jQuery/jquery.min.js></script><script src=https://blog.yukatayu.tech/plugins/bootstrap/bootstrap.min.js></script><script src=https://blog.yukatayu.tech/plugins/slick/slick.min.js></script><script src=https://blog.yukatayu.tech/plugins/venobox/venobox.min.js></script><script src=https://blog.yukatayu.tech/plugins/search/fuse.min.js></script><script src=https://blog.yukatayu.tech/plugins/search/mark.js></script><script src=https://blog.yukatayu.tech/plugins/search/search.js></script><script src=https://blog.yukatayu.tech/js/script.min.js></script></body></html>